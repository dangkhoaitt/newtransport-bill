import React from 'react'
import { Link } from 'react-router-dom'
import { Any } from '../interface/Unknown'
import './style/index.scss'

export default function withErrorBoundary(WrappedComponent: React.ComponentType | Any): Any {
    return class extends React.Component {
        state = { hasError: false }

        static getDerivedStateFromError(error: Error): Any {
            console.log('error', error)
            // TODO send error to server
            return { hasError: true }
        }

        render(): React.ReactNode {
            if (this.state.hasError) {
                return <ErrorContent />
            }
            return <WrappedComponent {...this.props} />
        }
    }
}

function ErrorContent(): JSX.Element {
    return (
        <div className='exception-container'>
            <h2>Xảy ra sự cố</h2>
            <svg
                version='1.1'
                id='Capa_1'
                xmlns='http://www.w3.org/2000/svg'
                xmlnsXlink='http://www.w3.org/1999/xlink'
                x='0px'
                y='0px'
                viewBox='0 0 504.123 504.123'
                enableBackground='new 0 0 504.123 504.123'
                xmlSpace='preserve'>
                <circle style={{ fill: '#4EBD9E' }} cx='252.062' cy='252.062' r='252.062' />
                <path
                    style={{ fill: '#E1E6E8' }}
                    d='M430.868,38.597H73.255c-18.905,0-34.658,15.754-34.658,34.658v296.96
	c0,18.905,15.754,34.658,34.658,34.658h357.612c18.905,0,34.658-15.754,34.658-34.658V73.255
	C465.526,54.351,449.772,38.597,430.868,38.597z'
                />
                <path
                    style={{ fill: '#183651' }}
                    d='M430.868,412.751H73.255c-23.631,0-42.535-18.905-42.535-42.535V73.255
	c0-23.631,18.905-42.535,42.535-42.535h357.612c23.631,0,42.535,18.905,42.535,42.535v296.96
	C473.403,393.058,454.498,412.751,430.868,412.751z M73.255,46.474c-14.966,0-26.782,11.815-26.782,26.782v296.96
	c0,14.966,11.815,26.782,26.782,26.782h357.612c14.966,0,26.782-11.815,26.782-26.782V73.255c0-14.966-11.815-26.782-26.782-26.782
	H73.255z'
                />
                <path
                    style={{ fill: '#FFFFFF' }}
                    d='M465.526,338.708V73.255c0-18.905-15.754-34.658-34.658-34.658H73.255
	c-18.905,0-34.658,15.754-34.658,34.658v265.452'
                />
                <path
                    style={{ fill: '#183651' }}
                    d='M465.526,346.585c-4.726,0-7.877-3.151-7.877-7.877V73.255c0-14.966-11.815-26.782-26.782-26.782
	H73.255c-14.966,0-26.782,11.815-26.782,26.782v265.452c0,4.726-3.151,7.877-7.877,7.877s-7.877-3.151-7.877-7.877V73.255
	c0-23.631,18.905-42.535,42.535-42.535h357.612c23.631,0,42.535,18.905,42.535,42.535v265.452
	C473.403,342.646,469.465,346.585,465.526,346.585z'
                />
                <polygon
                    style={{ fill: '#CFD0D1' }}
                    points='335.557,465.526 168.566,465.526 204.8,404.874 299.323,404.874 '
                />
                <g>
                    <path
                        style={{ fill: '#183651' }}
                        d='M335.557,473.403L335.557,473.403H168.566c-3.151,0-5.514-1.575-7.089-3.938
		c-1.575-2.363-1.575-5.514,0-7.877l37.022-60.652c1.575-2.363,3.938-3.938,7.089-3.938h93.735c3.151,0,5.514,1.575,7.089,3.938
		l36.234,59.865c1.575,1.575,2.363,3.151,2.363,5.514C343.434,469.465,340.283,473.403,335.557,473.403z M181.957,457.649h139.422
		l-27.569-44.898h-84.283L181.957,457.649z'
                    />
                    <path
                        style={{ fill: '#183651' }}
                        d='M345.797,473.403H158.326c-4.726,0-7.877-3.151-7.877-7.877c0-4.726,3.151-7.877,7.877-7.877
		h186.683c4.726,0,7.877,3.151,7.877,7.877C353.674,469.465,349.735,473.403,345.797,473.403z'
                    />
                    <circle style={{ fill: '#183651' }} cx='201.649' cy='367.065' r='13.391' />
                    <circle style={{ fill: '#183651' }} cx='252.062' cy='367.065' r='13.391' />
                    <circle style={{ fill: '#183651' }} cx='302.474' cy='367.065' r='13.391' />
                </g>
                <ellipse style={{ fill: '#E1E6E8' }} cx='353.674' cy='118.942' rx='77.982' ry='30.72' />
                <g>
                    <path
                        style={{ fill: '#183651' }}
                        d='M353.674,274.117c-4.726,0-7.877-3.151-7.877-7.877v-37.809c0-4.726,3.151-7.877,7.877-7.877
		s7.877,3.151,7.877,7.877v37.809C361.551,270.178,357.612,274.117,353.674,274.117z'
                    />
                    <path
                        style={{ fill: '#183651' }}
                        d='M405.662,274.117H300.898c-4.726,0-7.877-3.151-7.877-7.877s3.151-7.877,7.877-7.877h104.763
		c4.726,0,7.877,3.151,7.877,7.877C413.538,270.178,410.388,274.117,405.662,274.117z'
                    />
                </g>
                <path
                    style={{ fill: '#FCBD5E' }}
                    d='M244.972,244.972l-74.831-133.908c-4.726-7.877-15.754-7.877-20.48,0L74.831,244.972
	c-4.726,7.877,1.575,17.329,10.24,17.329H235.52C244.185,262.302,249.698,252.849,244.972,244.972z'
                />
                <g>
                    <rect x='312.714' y='111.852' style={{ fill: '#183651' }} width='15.754' height='14.966' />
                    <rect x='345.797' y='111.852' style={{ fill: '#183651' }} width='15.754' height='14.966' />
                    <rect x='378.88' y='111.852' style={{ fill: '#183651' }} width='15.754' height='14.966' />
                </g>
                <g>
                    <path
                        style={{ fill: '#173651' }}
                        d='M159.902,144.935c-6.302,0-11.815,5.514-11.028,11.815l4.726,51.2c0,3.151,3.151,5.514,6.302,5.514
		c3.151,0,5.514-2.363,6.302-5.514l4.726-51.2C171.717,150.449,166.203,144.935,159.902,144.935z'
                    />
                    <circle style={{ fill: '#173651' }} cx='159.902' cy='232.369' r='8.665' />
                </g>
                <path
                    style={{ fill: '#2AA0DA' }}
                    d='M353.674,189.046c39.385,0,72.468-11.815,77.982-26.782v-43.323c0,16.542-34.658,30.72-77.982,30.72
	s-77.982-13.391-77.982-30.72v43.323C281.206,177.231,313.502,189.046,353.674,189.046z'
                />
                <path
                    style={{ fill: '#F05F50' }}
                    d='M353.674,189.046c-40.172,0-72.468-11.815-77.982-26.782v35.446c0,16.542,34.658,30.72,77.982,30.72
	s77.982-13.391,77.982-30.72v-35.446C426.142,177.231,393.058,189.046,353.674,189.046z'
                />
            </svg>
            <Link to='/'>Quay về trang chủ</Link>
        </div>
    )
}
